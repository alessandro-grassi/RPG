<!DOCTYPE html>
<html>
    <head>
        <title> Skeleton_blood_mage </title>
    </head>
    <body>
        <h3> Skeleton blood mage </h3>
        <button id="getStats">Get Stats</button>
        <button id="doDamageButton">Do Damage</button>
        <div class="dialog-box">
            <p class="dialog-text" id="dialog-box"></p>
            <button class="dialog-button" id="next-button">Next</button>
            <table id="tabella_stats"></table>
        </div>
    </body>
    <script>
        function creaTabellaStats(json_value) {
            path_img = "D:/OneDrive/Desktop/RPG/Missioni/Missione5/assets/Skeleton_blood_mage.png"
            table = "";
            table += "<tr><td><img src="+path_img+"></td></tr>"; 
            table += "<tr><td> Vita: "+json_value.Vita+"</td></tr>";
            table += "<tr><td> Vigore: "+json_value.Vigore+"</td></tr>";
            table += "<tr><td> Forza: "+json_value.Forza+"</td></tr>";
            table += "<tr><td> Destrezza: "+json_value.Destrezza+"</td></tr>";
            table += "<tr><td> Intelligenza: "+json_value.Intelligenza+"</td></tr>";
            table += "<tr><td> Fede: "+json_value.Fede+"</td></tr>";
            return table;
        } 

        function postData(url = '', data = {}) {
                return fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                })
                .then(response => response.json());
            }


        document.getElementById('doDamageButton').addEventListener('click', function() {
                /*const name = prompt("Enter player name:");
                const value = prompt("Enter damage value:");*/
                postData('http://localhost:8080/m5/api/do-damage-boss',{})
                    .then(data => {
                        document.getElementById('dialog-box').innerText = JSON.stringify(data, null, 2);
                    })
                    .catch(error => {
                        document.getElementById('dialog-box').innerText = 'Error: ' + error;
                    });
            });

        document.getElementById('getStats').addEventListener('click', function() {
                //const playerName = prompt("Enter player name:");
                fetch(`http://localhost:8080/m5/api/get-stats/`)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data)
                        table = creaTabellaStats(data.result)
                        document.getElementById('tabella_stats').innerHTML = table;
                    })
                    .catch(error => {
                        document.getElementById('result').innerText = 'Error: ' + error;
                    });
            });
        
    </script>
</html>