<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missione Wordle</title>
    <link rel="stylesheet" href="stile">
</head>
<body>
    <div class="container">
        <h1>Risolvi i Wordle per ottenere indizi e scoprire la parola finale!</h1>
        
        <div class="obiettivo-section">
            <h2>Obiettivo</h2>
            <p id="obiettivo">Caricamento...</p>
            <p>Una volta raccolti abbastanza indizi, potrai indovinare la parola finale e completare la missione.</p>
            <p><strong>Ricompensa:</strong> <span id="ricompensa">Caricamento...</span></p>
        </div>

        <div class="indizi-section">
            <h2>Indizi</h2>
            <div id="indizi-container">
                <p id="no-indizi">Nessun indizio disponibile. Gioca al Wordle per ottenerne uno!</p>
                <ul id="indizi-lista" style="display: none;"></ul>
            </div>
        </div>

        <div class="buttons-section">
            <button id="indovina-btn" class="action-button">Indovina Soluzione</button>
            <button id="gioca-btn" class="action-button">Gioca</button>
            <button id="home-btn" class="action-button">Torna alla Home</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Carica i dettagli generali
            fetch('/missione4/dettagliGenerali')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('obiettivo').textContent = data.obiettivo;
                    document.getElementById('ricompensa').textContent = data.ricompensa;
                    
                    // Aggiorna gli indizi
                    aggiornaIndizi(data.indiziOttenuti);
                })
                .catch(error => console.error('Errore nel caricamento dei dettagli:', error));
            
            // Funzione per aggiornare gli indizi
            function aggiornaIndizi(indizi) {
                const noIndizi = document.getElementById('no-indizi');
                const listaIndizi = document.getElementById('indizi-lista');
                
                if (indizi && indizi.length > 0) {
                    noIndizi.style.display = 'none';
                    listaIndizi.style.display = 'block';
                    listaIndizi.innerHTML = '';
                    
                    indizi.forEach(indizio => {
                        const li = document.createElement('li');
                        li.textContent = indizio;
                        listaIndizi.appendChild(li);
                    });
                } else {
                    noIndizi.style.display = 'block';
                    listaIndizi.style.display = 'none';
                }
            }
            
            // Event listeners per i pulsanti
            document.getElementById('indovina-btn').addEventListener('click', function() {
                window.location.href = '/missione4/indovina';
            });
            
            document.getElementById('gioca-btn').addEventListener('click', function() {
                window.location.href = '/missione4/gioca';
            });
            
            document.getElementById('home-btn').addEventListener('click', function() {
                window.location.href = '/sm_home';
            });
        });
    </script>
</body>
</html>
